<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Directory and file structure">
<meta name="keywords" content="figure directory,movie directory,video directory,source code directory,nickname,newcommands,chapter organization,chapter files,figure directory,movie directory,video directory,source code directory,assembly (chapters to book),links to fig/src directories,IPython notebooks,notebooks,Jupyter notebooks,RunestoneInteractive books,sphinx,cross-referencing,generalized references,slides,study guides,IPython notebooks,notebooks,Jupyter notebooks,private repos,mirroring repos,solutions to exercises,admonitions,interactive code,exercises in DocOnce,quiz,multiple-choice questions,video in DocOnce,embedded video in DocOnce,movie in DocOnce">

<title>Directory and file structure</title>

<!-- Bootstrap style: bootstrap_bluegray -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_bootstrap/css/bootstrap_bluegray.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">

/*
in.collapse+a.btn.showdetails:before { content:'Hide details'; }
.collapse+a.btn.showdetails:before { content:'Show details'; }
*/
</style>


<script src="http://sagecell.sagemath.org/static/jquery.min.js"></script>
<script src="http://sagecell.sagemath.org/embedded_sagecell.js"></script>
<link rel="stylesheet" type="text/css" href="https://sagecell.sagemath.org/static/sagecell_embed.css">
<script>
$(function () {
    // Make the div with id 'mycell' a Sage cell
    sagecell.makeSagecell({inputLocation:  '#mycell',
                           template:       sagecell.templates.minimal,
                           evalButtonText: 'Activate'});
    // Make *any* div with class 'compute' a Sage cell
    sagecell.makeSagecell({inputLocation: 'div.compute',
                           evalButtonText: 'Evaluate'});
});
</script>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [('Directory structure',
               1,
               'setup:rules:dir_struct',
               'setup:rules:dir_struct'),
              ('Principles and conventions',
               1,
               'setup:rules:conv',
               'setup:rules:conv'),
              ('Mathematical notation and newcommands',
               2,
               'setup:rules:conv:newcommands',
               'setup:rules:conv:newcommands'),
              ('Label conventions',
               2,
               'setup:rules:conv:labels',
               'setup:rules:conv:labels'),
              ('Programming style', 2, None, '___sec4'),
              ('Degree of modularization', 2, None, '___sec5'),
              ('Student guide (slides) style', 2, None, '___sec6'),
              ('Style in exercises, problems, and projects',
               2,
               None,
               '___sec7'),
              ('Assembling different pieces to a book',
               1,
               'setup:rules:book_assembly',
               'setup:rules:book_assembly'),
              ('Organization of a chapter',
               2,
               'setup:rules:book_assembly:org',
               'setup:rules:book_assembly:org'),
              ('Figures and source code', 2, None, '___sec10'),
              ('Assembly of chapters to a book', 2, None, '___sec11'),
              ('Tools', 1, None, '___sec12'),
              ('Making a new chapter', 2, None, '___sec13'),
              ('Compiling the chapter to LaTeX and PDF', 2, None, '___sec14'),
              ('Cleaning Files', 3, None, '___sec15'),
              ('Automatic spell checking', 2, None, '___sec16'),
              ('Compiling the chapter to HTML', 2, None, '___sec17'),
              ('Compiling the chapter to a notebook', 2, None, '___sec18'),
              ('About figures when publishing HTML', 2, None, '___sec19'),
              ('Compiling the book', 2, None, '___sec20'),
              ('HTML/Sphinx versions of the book', 3, None, '___sec21'),
              ('Cross-referencing across chapters (or books)',
               1,
               None,
               '___sec22'),
              ('Study guides and slides',
               1,
               'setup:rules:slides',
               'setup:rules:slides'),
              ('Slide directory', 2, None, '___sec24'),
              ('Generating slides from running text', 2, None, '___sec25'),
              ('Slides as IPython/Jupyter notebooks', 2, None, '___sec26'),
              ('Compiling slides', 2, None, '___sec27'),
              ('IPython/Jupyter notebooks', 2, None, '___sec28'),
              ('Writing in private repository while publishing in public',
               1,
               None,
               '___sec29'),
              ('Book versions with and without solutions to exercises',
               1,
               None,
               '___sec30'),
              ('Special features for teaching material', 1, None, '___sec31'),
              ('Admonitions', 2, None, '___sec32'),
              ('Simple box', 2, None, '___sec33'),
              ('Embedded interactive code', 2, None, '___sec34'),
              ('The `pyoptpro` code environment', 3, None, '___sec35'),
              ('The `pyscpro` code environment', 3, None, '___sec36'),
              ('Exercises', 2, None, '___sec37'),
              ('Quote', 2, None, '___sec38'),
              ('Quiz', 2, None, '___sec39'),
              ('What about a video lecture?', 2, None, '___sec40'),
              ('References', 1, None, '___sec41')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
$$




    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="rules-bootstrap.html">Directory and file structure</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._rules-bootstrap001.html#setup:rules:dir_struct" style="font-size: 80%;">Directory structure</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap002.html#setup:rules:conv" style="font-size: 80%;">Principles and conventions</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap003.html#setup:rules:book_assembly" style="font-size: 80%;">Assembling different pieces to a book</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap004.html#___sec12" style="font-size: 80%;">Tools</a></li>
     <!-- navigation toc: --> <li><a href="#___sec22" style="font-size: 80%;">Cross-referencing across chapters (or books)</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap006.html#setup:rules:slides" style="font-size: 80%;">Study guides and slides</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap007.html#___sec29" style="font-size: 80%;">Writing in private repository while publishing in public</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap008.html#___sec30" style="font-size: 80%;">Book versions with and without solutions to exercises</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap009.html#___sec31" style="font-size: 80%;">Special features for teaching material</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap009.html#___sec41" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0005"></a>
<!-- !split -->

<h1 id="___sec22">Cross-referencing across chapters (or books) </h1>

<p>
A fundamental problem when writing a book <em>and</em> stand-alone chapters
arises with cross-referencing. In a book file it makes sense to refer
to an equation in any chapter, say (4.23), while in a stand-alone
chapter references to equations or sections in other stand-alone
documents will not work. That is, LaTeX has a native mechanism for
this, the <code>xr</code> package, where one can register a set of <code>.aux</code> files
for other LaTeX documents and refer directly to these labels and get
them right. It is then possible to write something like

<p>

<!-- code=latex (!bc latex) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">see (<span style="color: #008000; font-weight: bold">\eqref</span><span style="color: #008000">{</span>sec:results:u:eq<span style="color: #008000">}</span>) in <span style="color: #008000; font-weight: bold">\cite</span><span style="color: #008000">{</span>Hansen<span style="color: #008000">_</span>2011b<span style="color: #008000">}</span>
</pre></div>
<p>
and get it out as

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">see (2.37) in [12]
</pre></div>
<p>
provided our <code>.tex</code> file contains <code>\externaldocument{myother}</code>
and the label <code>sec:results:u:eq</code> is defined in <code>myother.aux</code>. DocOnce
has generalized this feature so it works for non-LaTeX formats as well.
It is called <em>generalized cross-references</em>. You can then write
such references across chapters and get all labels right whether you
produce the entire book or individual chapters.

<p>
Here is an example on a generalized reference to an equation in another
document:

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">The world&#39;s most famous equation is ref[\eqref{setup:fake:Emc2}][ in
cite{Langtangen_dobook_fake}][
as found in the document &quot;Some document&quot;:
<span style="color: #BA2121">&quot;http://hplgit.gthub.io/setup4book-doconce/doc/pub/fake&quot;</span>
cite{Langtangen_dobook_fake}].
</pre></div>
<p>
This sentence is rendered as follows in the present format (<code>html</code>):

<p>

<!-- begin box -->
<div style="width: 95%; padding: 10px; border: 1px solid #000; border-radius: 4px;">
The world's most famous equation is 
as found in the document <a href="http://hplgit.gthub.io/setup4book-doconce/doc/pub/fake" target="_self">Some document</a>
<a href="._rules-bootstrap009.html#Langtangen_dobook_fake">[3]</a>.
</div>
<!-- end box -->


<p>
More detailed information about generalized cross-references is
found in the <a href="http://hplgit.github.io/doconce/doc/pub/manual/html/manual.html#generalized-cross-referencing" target="_self">DocOnce manual</a>.
In particular, one has to insert <code># Externaldocuments:</code> commands in
all <code>main_*.do.txt</code> files that includes files with generalized
references.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Tip: Limit generalized references to those strictly needed.</b>
Books often contain a lot of cross references, and making generalized
references out of all them can be quite some job. A convenient way
of saving boring work
is to enclose nice-to-have, yet not strictly needed, references in
Mako or Preprocess if statements (typically <code>if BOOK == &quot;book&quot;</code>) such
that they appear in the full book but not in individual chapters.

<p>
However, if individual chapters in HTML are to be one official format
of the book, you should make the chapters identical to the book and
make generalized references out of all references to other chapters.
</div>


<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._rules-bootstrap004.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._rules-bootstrap006.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    
