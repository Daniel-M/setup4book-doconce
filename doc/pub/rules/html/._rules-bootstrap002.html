<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Directory and file structure">
<meta name="keywords" content="figure directory,movie directory,video directory,source code directory,nickname,newcommands,chapter organization,chapter files,figure directory,movie directory,video directory,source code directory,assembly (chapters to book),links to fig/src directories,IPython notebooks,notebooks,Jupyter notebooks,RunestoneInteractive books,sphinx,cross-referencing,generalized references,slides,study guides,IPython notebooks,notebooks,Jupyter notebooks,private repos,mirroring repos,solutions to exercises,admonitions,interactive code,exercises in DocOnce,quiz,multiple-choice questions,video in DocOnce,embedded video in DocOnce,movie in DocOnce">

<title>Directory and file structure</title>

<!-- Bootstrap style: bootstrap_bluegray -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_bootstrap/css/bootstrap_bluegray.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">

/*
in.collapse+a.btn.showdetails:before { content:'Hide details'; }
.collapse+a.btn.showdetails:before { content:'Show details'; }
*/
</style>


<script src="http://sagecell.sagemath.org/static/jquery.min.js"></script>
<script src="http://sagecell.sagemath.org/embedded_sagecell.js"></script>
<link rel="stylesheet" type="text/css" href="https://sagecell.sagemath.org/static/sagecell_embed.css">
<script>
$(function () {
    // Make the div with id 'mycell' a Sage cell
    sagecell.makeSagecell({inputLocation:  '#mycell',
                           template:       sagecell.templates.minimal,
                           evalButtonText: 'Activate'});
    // Make *any* div with class 'compute' a Sage cell
    sagecell.makeSagecell({inputLocation: 'div.compute',
                           evalButtonText: 'Evaluate'});
});
</script>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [('Directory structure',
               1,
               'setup:rules:dir_struct',
               'setup:rules:dir_struct'),
              ('Principles and conventions',
               1,
               'setup:rules:conv',
               'setup:rules:conv'),
              ('Mathematical notation and newcommands',
               2,
               'setup:rules:conv:newcommands',
               'setup:rules:conv:newcommands'),
              ('Label conventions',
               2,
               'setup:rules:conv:labels',
               'setup:rules:conv:labels'),
              ('Programming style', 2, None, '___sec4'),
              ('Degree of modularization', 2, None, '___sec5'),
              ('Student guide (slides) style', 2, None, '___sec6'),
              ('Style in exercises, problems, and projects',
               2,
               None,
               '___sec7'),
              ('Assembling different pieces to a book',
               1,
               'setup:rules:book_assembly',
               'setup:rules:book_assembly'),
              ('Organization of a chapter',
               2,
               'setup:rules:book_assembly:org',
               'setup:rules:book_assembly:org'),
              ('Figures and source code', 2, None, '___sec10'),
              ('Assembly of chapters to a book', 2, None, '___sec11'),
              ('Tools', 1, None, '___sec12'),
              ('Making a new chapter', 2, None, '___sec13'),
              ('Compiling the chapter to LaTeX and PDF', 2, None, '___sec14'),
              ('Cleaning Files', 3, None, '___sec15'),
              ('Automatic spell checking', 2, None, '___sec16'),
              ('Compiling the chapter to HTML', 2, None, '___sec17'),
              ('Compiling the chapter to a notebook', 2, None, '___sec18'),
              ('About figures when publishing HTML', 2, None, '___sec19'),
              ('Compiling the book', 2, None, '___sec20'),
              ('HTML/Sphinx versions of the book', 3, None, '___sec21'),
              ('Cross-referencing across chapters (or books)',
               1,
               None,
               '___sec22'),
              ('Study guides and slides',
               1,
               'setup:rules:slides',
               'setup:rules:slides'),
              ('Slide directory', 2, None, '___sec24'),
              ('Generating slides from running text', 2, None, '___sec25'),
              ('Slides as IPython/Jupyter notebooks', 2, None, '___sec26'),
              ('Compiling slides', 2, None, '___sec27'),
              ('IPython/Jupyter notebooks', 2, None, '___sec28'),
              ('Writing in private repository while publishing in public',
               1,
               None,
               '___sec29'),
              ('Book versions with and without solutions to exercises',
               1,
               None,
               '___sec30'),
              ('Special features for teaching material', 1, None, '___sec31'),
              ('Admonitions', 2, None, '___sec32'),
              ('Simple box', 2, None, '___sec33'),
              ('Embedded interactive code', 2, None, '___sec34'),
              ('The `pyoptpro` code environment', 3, None, '___sec35'),
              ('The `pyscpro` code environment', 3, None, '___sec36'),
              ('Exercises', 2, None, '___sec37'),
              ('Quote', 2, None, '___sec38'),
              ('Quiz', 2, None, '___sec39'),
              ('What about a video lecture?', 2, None, '___sec40'),
              ('References', 1, None, '___sec41')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
$$




    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="rules-bootstrap.html">Directory and file structure</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._rules-bootstrap001.html#setup:rules:dir_struct" style="font-size: 80%;">Directory structure</a></li>
     <!-- navigation toc: --> <li><a href="#setup:rules:conv" style="font-size: 80%;">Principles and conventions</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap003.html#setup:rules:book_assembly" style="font-size: 80%;">Assembling different pieces to a book</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap004.html#___sec12" style="font-size: 80%;">Tools</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap005.html#___sec22" style="font-size: 80%;">Cross-referencing across chapters (or books)</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap006.html#setup:rules:slides" style="font-size: 80%;">Study guides and slides</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap007.html#___sec29" style="font-size: 80%;">Writing in private repository while publishing in public</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap008.html#___sec30" style="font-size: 80%;">Book versions with and without solutions to exercises</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap009.html#___sec31" style="font-size: 80%;">Special features for teaching material</a></li>
     <!-- navigation toc: --> <li><a href="._rules-bootstrap009.html#___sec41" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0002"></a>
<!-- !split -->

<h1 id="setup:rules:conv">Principles and conventions</h1>

<p>
When starting a bigger project like one or more book projects, alone or
with others, it is wise to sit down and agree upon some basic principles
and conventions. This note is about a technical infrastructure for writing
books as an assembly of chapter components, but much more infrastructure
is needed to achieve an efficient work flow in the project. One simply
needs rules to make the work flow and end product coherent. This means one
must agree upon

<ul>
 <li> mathematical notation</li>
 <li> conventions for labels in cross referencing</li>
 <li> programming style</li>
 <li> degree of modularization</li>
 <li> writing style</li>
 <li> student guide (slides) style</li>
 <li> style in exercises, problems, and projects</li>
</ul>

The suggestions here have grown out of the author's own experience with
writing books and must be taken as just one possible example on how to
deal with the bullet list above.
<!-- As most others, I developed a very private -->
<!-- style for writing books in LaTeX -->

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Observation: LaTeX-based writing styles are very private.</b>
Most authors develop very private ways of using LaTeX in their projects.
They often have a vast amount of newcommands and a collection of special
LaTeX packages they rely upon. The result is that it might be quite a
challenge to combine two LaTeX-based writing projects, because of all
the special commands floating around.

<p>
With DocOnce and other quite simple markup languages, there are not so
many ways to do it and the source code becomes much simpler and easier
to integrate across projects and authors.

<p>
<b>Note.</b>
DocOnce applies <em>a lot</em> of fancy LaTeX packages and HTML CSS styles,
but the associated LaTeX/HTML code is automatically generated and
steered via command-line options such that the complexity of
fancy admonitions or syntax highlighting is not visible in the
document the authors are writing on.
</div>


<h2 id="setup:rules:conv:newcommands">Mathematical notation and newcommands</h2>

<p>
<div class="alert alert-block alert-danger alert-text-normal"><b>Use a common mathematical notation!</b>
I strongly recommend to spend considerable time on constructing a
set of newcommands in LaTeX that defines a <em>common</em> mathematical
notation for the project (and future projects). Think about
newcommands for vectors (arrows or boldface), matrices (uppercase
slanted or bold?, tensors, gradient, divergence, curl, etc.
</div>


<p>
Files with names <code>newcommands*.tex</code> are treated by DocOnce as files
with definition of newcommands for LaTeX mathematics.  These files
must reside in the same directory as the DocOnce source
files. However, for a book project, I recommend to have a single
newcommands file shared by all chapters.  This file is placed in
<code>doc/src/chapters/newcommands.p.tex</code> and copied to a specific chapter
by the make script for that chapter. The extension of the file is
<code>.p.tex</code>, indicating that the file has to be <em>preprocessed</em> by
<code>preprocess</code> prior to being copied. The reason is that one
occasionally wants the definitions of the newcommands to depend on the
output format: standard LaTeX or MathJax.  For example, subscripts in
<code>mbox</code> font look best with footnotesize font in plain LaTeX, while the
larger <code>small</code> font is more appropriate for MathJax. We can then put
the following definitions in <code>newcommands.p.tex</code>:

<p>

<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic">% #if FORMAT in (&quot;latex&quot;, &quot;pdflatex&quot;)</span>
<span style="color: #408080; font-style: italic">% Use footnotesize in subscripts</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\subsc</span><span style="color: #008000">}</span>[2]<span style="color: #008000">{</span>#1<span style="color: #008000">_{</span><span style="color: #008000; font-weight: bold">\mbox</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\footnotesize</span> #2<span style="color: #008000">}}}</span>
<span style="color: #408080; font-style: italic">% #else</span>
<span style="color: #408080; font-style: italic">% In MathJax, a different construction is used</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\subsc</span><span style="color: #008000">}</span>[2]<span style="color: #008000">{</span>#1<span style="color: #008000">_{</span><span style="color: #008000; font-weight: bold">\small\mbox</span><span style="color: #008000">{</span>#2<span style="color: #008000">}}}</span>
<span style="color: #408080; font-style: italic">% #endif</span>
</pre></div>
<p>
The make script will then run <code>preprocess</code> on this file,
typically

<p>

<!-- code=bash (!bc shcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">preprocess -DFORMAT<span style="color: #666666">=</span>pdflatex ../newcommands.p.tex &gt; newcommands.tex
<span style="color: #408080; font-style: italic"># or</span>
preprocess -DFORMAT<span style="color: #666666">=</span>html ../newcommands.p.tex &gt; newcommands.tex
</pre></div>
<p>
<div class="alert alert-block alert-danger alert-text-normal"><b>DocOnce newcommands are for mathematics only!</b>
Note that
newcommands in DocOnce context are only used for mathematics,
rendered by LaTeX or MathJax. Newcommands for other LaTeX constructions
(such as section or boxes) should not be used in the DocOnce source
code as these are confined
to the LaTeX format. Use instead Mako functions.
</div>


<p>
Here is an example on some
useful constructs in a <code>newcommands.p.tex</code> file:

<p>

<!-- code=latex (!bc latexcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\halfi</span><span style="color: #008000">}{{</span>1/2<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\half</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\frac</span><span style="color: #008000">{</span>1<span style="color: #008000">}{</span>2<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\tp</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\thinspace</span> .<span style="color: #008000">}</span>  <span style="color: #408080; font-style: italic">% right space after equations</span>

<span style="color: #408080; font-style: italic">% Operators</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Ddt</span><span style="color: #008000">}</span>[1]<span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\frac</span><span style="color: #008000">{</span>D #1<span style="color: #008000">}{</span>dt<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\E</span><span style="color: #008000">}</span>[1]<span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\hbox</span><span style="color: #008000">{</span>E<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\lbrack</span> #1 <span style="color: #008000; font-weight: bold">\rbrack</span><span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Var</span><span style="color: #008000">}</span>[1]<span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\hbox</span><span style="color: #008000">{</span>Var<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\lbrack</span> #1 <span style="color: #008000; font-weight: bold">\rbrack</span><span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Std</span><span style="color: #008000">}</span>[1]<span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\hbox</span><span style="color: #008000">{</span>Std<span style="color: #008000">}</span><span style="color: #008000; font-weight: bold">\lbrack</span> #1 <span style="color: #008000; font-weight: bold">\rbrack</span><span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Oof</span><span style="color: #008000">}</span>[1]<span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\mathcal</span><span style="color: #008000">{</span>O<span style="color: #008000">}</span>(#1)<span style="color: #008000">}</span>

<span style="color: #408080; font-style: italic">% Boldface vectors/tensors</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\x</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>x<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\X</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>X<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\renewcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\u</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>u<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\renewcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\v</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>v<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\w</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>w<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\V</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>V<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\e</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>e<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\f</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>f<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\F</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>F<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\stress</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\sigma</span><span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\strain</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\varepsilon</span><span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\stressc</span><span style="color: #008000">}{{</span><span style="color: #008000; font-weight: bold">\sigma</span><span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\strainc</span><span style="color: #008000">}{{</span><span style="color: #008000; font-weight: bold">\varepsilon</span><span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\normalvec</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>n<span style="color: #008000">}}</span>

<span style="color: #408080; font-style: italic">% Unit vectors</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\ii</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>i<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\jj</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>j<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\kk</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>k<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\ir</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>i<span style="color: #008000">}_</span>r<span style="color: #008000">}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\ith</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>i<span style="color: #008000">}_{</span><span style="color: #008000; font-weight: bold">\theta</span><span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\iz</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\boldsymbol</span><span style="color: #008000">{</span>i<span style="color: #008000">}_</span>z<span style="color: #008000">}</span>

<span style="color: #408080; font-style: italic">% Number sets</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Real</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\mathbb</span><span style="color: #008000">{</span>R<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Integerp</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\mathbb</span><span style="color: #008000">{</span>N<span style="color: #008000">}}</span>
<span style="color: #008000; font-weight: bold">\newcommand</span><span style="color: #008000">{</span><span style="color: #008000; font-weight: bold">\Integer</span><span style="color: #008000">}{</span><span style="color: #008000; font-weight: bold">\mathbb</span><span style="color: #008000">{</span>Z<span style="color: #008000">}}</span>
</pre></div>

<h2 id="setup:rules:conv:labels">Label conventions</h2>

<p>
Books usually contain large amounts of cross referencing using
labels (logical names) for sections, equations, exercises,
and literature references.
I strongly recommend to introduce conventions for how to construct
labels as it makes it much easier to find the name of a new label and
understand what a given label refers to.

<p>
My chapter names are of the form <code>ch:name</code>, where <code>name</code> is the
nickname of the chapter (this nickname is used for many other purposes
also, see the section <a href="._rules-bootstrap003.html#setup:rules:book_assembly:org">Organization of a chapter</a>).
Section and subsection names are of the form

<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">projectname:chaptername:sectionname:subsectionname
</pre></div>
<p>
where the names are short nicknames. Each short name may contain
underscores to separate words. For example, the present section
has label <code>setup:rules:conv:labels</code>, where <code>setup</code> is the nickname of the
project (this book), <code>rules</code> is the nickname of the present chapter,
<code>conv</code> is the nickname of the present section, and
<code>label</code> is the nickname of the subsection.
The section <a href="._rules-bootstrap003.html#setup:rules:book_assembly:org">Organization of a chapter</a>
has label <code>setup:rules:book_assembly:org</code>, where <code>book_assembly</code> is
the nickname of the section using underscore to separate two words.
Sometimes I leave out the project name.

<p>
Equations may start with the current subsection label and
continued with <code>eq:name</code>, where <code>name</code> is some logical name for
the equation. Figures are given the same type of name, except that
the postfix is <code>fig:name</code>. For exercises I use <code>exer:name</code> as postfix
in the labels. Equations and figures within an exercise have extended
names such as <code>setup:rules:exer:eq:uv_relation</code>.

<p>
Bibliographic references can take the forms <code>author_year</code>,
<code>author1_author2_year</code>, <code>author1_etal_year</code>. An alternative is
to use names that reflect the topic:
<code>topic:paper</code> or <code>topic:url</code>, e.g., <code>IPython:paper</code> for a ]paper on IPython
or <code>IPython:url</code> for the IPython website.

<p>
You can run <code>doconce list_labels *.do.txt</code> to get a list of labels,
categorized under the various section headings, in your DocOnce
documents.  This command quickly reveals if a clean-up of label names
is necessary.  You can redirect the output of the command to a file
and then add a second column with new label names. This file can be
used with the command <code>doconce replace_from_file</code> to perform
substitutions from old to new labels.

<p>
Compilation of DocOnce files can make use of the option
<code>--latex_labels_in_margin</code> to get the label names of equations
and sections to be printed in the margin.

<h2 id="___sec4">Programming style </h2>

<p>
It is fundamental for a book project to stick to one well-defined
programming style. I recommend to adopt the most widely accepted
style and adapt that to the project.
For example, in the world of Python programming, there is a style,
referred to as <a href="https://www.python.org/dev/peps/pep-0008/" target="_self">PEP8</a>.
Personally, I am not fond of all the rules in this style, and
I intentionally break some of them, especially rules that forces
unnecessary vertical space in a book (although vertical space in
electronic books is for free, there is a strong tradition of
minimizing the vertical length of programs in books).
Fortunately, for Python there is are nice tools for checking that
a code follows the PEP8 rules, e.g.,
<a href="https://flake8.readthedocs.org/en/2.0/" target="_self">Flake8</a> (see
<a href="._rules-bootstrap009.html#Langtangen_TCSE6_debug">[1]</a> for an intro).

<p>
For any programming language it is key to agree on how to use
white space in indentation, style of loops, identifier
names (<code>my_funtcion</code> vs <code>myFunction</code> vs <code>MyFunction</code>), white space
in function argument lists, etc.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Tip: make a 1-1 mapping between mathematics and code.</b>
Computer code is very much easier to understand if you have defined
the problem it is going to solve in mathematics first. Reuse terms
and notation in the program, and try to make the key statements in the code
as close as possible to the mathematical formulation.
</div>


<p>
Typesetting of computer code in DocOnce makes use of the <code>!bc</code> construction
and a named environment, e.g., <code>pycod</code> for a Python snippet and <code>pypro</code>
for a complete Python program. Users are often confused if a set of
statements in a text can be executed as they stand or not. That is why
we have introduced the <code>cod</code> and <code>pro</code> environments: <code>cod</code> is for just some
code, while <code>pro</code> is for a complete program that will run. You may
choose the typesetting to be different for the <code>cod</code> and <code>pro</code> environments.

<p>
When preparing text for IPython/Jupyter notebooks, a code snippet cannot
run unless previous snippets contain the necessary code. Sometimes this
forces you to include more code than would be natural in a book.
There is a third type of environment, <code>hid</code>, that can be used to
insert code segments that are to be hidden in text, but present in
notebooks to enable execution of future snippets. For example,

<p>

<!-- code=doconce (!bc do) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic"># Need to import to run next snippet</span>
!bc pyhid
from numpy import *
from matplotlib.pyplot import *
!ec

We can now generate coordinates by

!bc pycod
x = linspace(0, 1, 101)
y = sin(x)
plot(x, y)
!ec
</pre></div>
<p>
The import statements will only be visible in the notebook output and not
in any other format.

<h2 id="___sec5">Degree of modularization </h2>

<p>
My recommendation is to divide the project into as small modules as possible
and to make these modules as independent as possible. This is a very difficult
optimization problem. There is some kind of gravity force towards
big chapters and lots of cross-references internally and to other chapters.
For book composition and even more for course composition, smaller modules
give much higher degree of flexibility.

<p>
To make modules independent, the degree of cross-referencing between
modules must be modest, which forces a need to repeat material.
Repetition breaks a strong tradition in book writing. However,
moving away from a strictly linear chapter-by-chapter book to a more
flexible set of modules connected in a graph, will induce repetition.
Readers also appreciate repetition, perhaps slightly differently phrased
with purpose, rather than being served with lots of references to
equations and codes in other chapters.

<p>
<div class="alert alert-block alert-success alert-text-normal"><b>Tip: Define input-output of modules.</b>
Ideally, modules should start with a well-defined list of required
background knowledge and a set of learning outcomes.
This information makes it easier to place the module in the
knowledge landscape.
</div>


<p>
Books with widely different writing styles among authors tend to be
confusing for readers. If the styles differ much, and it is difficult
to converge to a more coherent style, listing the authors together
with the chapter title is an idea to point explicitly out that
a different team is behind the present chapter.

<h2 id="___sec6">Student guide (slides) style </h2>

<p>
This note suggests to develop a book together with a <em>study guide</em>, i.e.,
a summarizing version of the material. An effective format of a study
guide is a set of slides, ideally a set that can be used both for
teaching and for self-study. The section <a href="._rules-bootstrap006.html#setup:rules:slides">Study guides and slides</a> explains
some infrastructure for producing DocOnce slides.

<p>
Some prefer to develop slides for a study guide first and then use this
as a skeleton for writing the running text of a chapter. Others prefer
to produce the slides from the running text.

<p>
The style of slides is even more important than the style of running text.
Slides for reading are not so sensitive to the style, but if the slides
are also intended to be used in teaching, the style becomes key.
Some comments on style are provided in the box in the introduction to
the section <a href="._rules-bootstrap006.html#setup:rules:slides">Study guides and slides</a>. Rather than having boring headings a la
<em>Assumptions</em>, followed by a bullet list of assumptions,
I recommend to summarize the most important information in a 1-2 line
heading, e.g., <em>We assume a homogeneous material and no external forcing</em>.
The headings will then form a collection of the most important
information from each slide and be a very effective table of contents of
the material. The most important thing, though, is that different authors
stick to the same slide style.

<h2 id="___sec7">Style in exercises, problems, and projects </h2>

<p>
A central part of the writing style in a book is the division of
material between running text and exercises. DocOnce features three
types of exercises which can be effectively used in this context:

<ul>
 <li> Exercise: smaller exercises tightly coupled to the text</li>
 <li> Problem: smaller exercise that live its own life (without
   references to the text)</li>
 <li> Project: large problem</li>
</ul>

Exercises are then used to repeat and train the material in the book.
Problems are used to explore new problem settings, while projects
are collections of closely related problems.
(The term &quot;exercise&quot; means in DocOnce context either an exercise in
the restricted sense or a common term for what we call
exercise, problem, and project above.)

<p>
The DocOnce exercise format has several useful features:

<ul>
 <li> hints</li>
 <li> multiple-choice questions (quiz)</li>
 <li> remarks</li>
 <li> short answers</li>
 <li> (longer) complete solutions</li>
</ul>

Many students struggle with identifying the
problem setting (question) when too much information comes at once.
Hints can be effectively used to separate the question from additional
information that is just supposed to help the reader. Remarks fulfill a similar
purpose and can separate fun facts or information that puts the problem
into a wider perspective. Short answers and full solutions can be
taken out of the document at compile time. (HTML Bootstrap styles
can fold/unfold hints and solutions/answers.)

<p>
Multiple-choice questions are typeset with the
<a href="http://hplgit.github.io/doconce/doc/pub/quiz/quiz.html" target="_self">quiz environment</a>
in DocOnce. All quizzes can be extracted and uploaded as online
<a href="https://getkahoot.com" target="_self">Kahoot games</a> where students can participate
via their smart phones.

<p>
It is possible to extract all exercises in a DocOnce document as a
separate document.

<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._rules-bootstrap001.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._rules-bootstrap003.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    
